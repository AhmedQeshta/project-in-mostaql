<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bracelet</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="dist/css/main.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.2/evo-calendar/css/evo-calendar.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">

</head>
<body>

<!-- header -->
    <header class="container__header"> 
        <div class="header"> 
            <div class="header__logo">
                <a href="index.html">
                    <img src="dist/images/logo.png" alt="logo web page">
                </a>
            </div>
            
            <form class="header__search" action="#">
                <i class="header__search__icon fa fa-search" aria-hidden="true"></i>
                <input class="header__search__input" type="text" placeholder="إبحث هنا ...">
            </form>

    
            <div class="header__btnAuth">
                <a class="header__btnAuth__login" href="#">دخول</a>
                <a class="header__btnAuth__signUp" href="#">مستخدم جديد</a>
            </div>

            <a id="btnHamburger" href="#" class="header__toggle hide-for-desktop">
                <span></span>
                <span></span>
                <span></span>
            </a>
        </div>
        <div class="container__header__menu has-fade">
            <div class="container__header__menu__btnAuth">
                <a class="container__header__menu__btnAuth__login" href="#">دخول</a>
                <a class="container__header__menu__btnAuth__signUp" href="#">مستخدم جديد</a>
            </div>
        </div>
    </header>
<!-- for search responsive less than medium-->
    <div class="container__header__search hidden__header__search">
        <form class="container__header__search__form" action="#">
            <i class="container__header__search__form__icon fa fa-search" aria-hidden="true"></i>
            <input class="container__header__search__form__input" type="text" placeholder="Search">
        </form>
    </div>

   
    <!-- body -->
    <div class="dateTicket__container">
        <div class="dateTicket__container__head">
            <p>عنوان المناسبة أو الحفلة او الحدث </p>
            <a href="infoForCard.html">
                <i class="fa fa-arrow-right" aria-hidden="true"></i>
            </a>
        </div>
        
        <form class="dateTicket__container__calender" action="#">
            <input hidden type="date" id="ticket_date" name="ticket_date">
        </form>



            <!-- <div class="container"> -->
                <div class="calendar direction-ltr">
                    <div class="card__infoCalender direction-rtl">
                        
                        <div class="supCard__infoCalender">
                            <p class="supCard__infoCalender__name">متوفر تذاكر</p>
                            <p class="supCard__infoCalender__color color__limeGreen"></p>
                        </div>

                        <div class="supCard__infoCalender">
                            <p class="supCard__infoCalender__name">غير متوفر تذاكر</p>
                            <p class="supCard__infoCalender__color color__grayGray"></p>
                        </div>

                        <div class="supCard__infoCalender">
                            <p class="supCard__infoCalender__name">تم إختيار التذكرة</p>
                            <p class="supCard__infoCalender__color color__limeOrange"></p>
                        </div>
                        
                        
                    </div>
                    <div>
                        <!-- give the number selected (day) for search if has date for this day -->
                        <input hidden type="text" value="" id="input_number_day">
                        <div class="month">
                            <i class="fas fa-angle-left prev"></i>
                            <div class="date">
                              <h1></h1>
                              <p></p>
                            </div>
                            <i class="fas fa-angle-right next"></i>
                          </div>
                          <div class="weekdays">
                            <div>Sun</div>
                            <div>Mon</div>
                            <div>Tue</div>
                            <div>Wed</div>
                            <div>Thu</div>
                            <div>Fri</div>
                            <div>Sat</div>
                          </div>
                          <div class="days" ></div>
                    </div>
                </div>
              <!-- </div> -->
        

        <!-- card time -->
        <div class="dateTicket__container__CardTime">
            <a href="#" class="UnChecked_Time">
                <div class="CardTime__right">
                    <label class="Card__container">
                        <input type="radio" name="time1" id="time1">
                        <span class="checkmark"></span>
                    </label>
                    <p>15:24 <i class="fas fa-clock"></i></p>
                </div>
                <div class="CardTime__left">
                    <p class="CardTime__left__open">عدد التذاكر : 1</p>
                </div>
            </a>
            <a href="#" class="UnChecked_Time">
                <div class="CardTime__right">
                    <label class="Card__container">
                        <input type="radio" name="time1" id="time2">
                        <span class="checkmark"></span>
                    </label>
                    <p>15:24 <i class="fas fa-clock"></i></p>
                </div>
                <div class="CardTime__left">
                    <p class="CardTime__left__close">بيعت لاكامل</p>
                </div>
            </a>
            <a href="#" class="UnChecked_Time">
                <div class="CardTime__right">
                    <label class="Card__container">
                        <input type="radio" name="time1" id="time1">
                        <span class="checkmark"></span>
                    </label>
                    <p>15:24 <i class="fas fa-clock"></i></p>
                </div>
                <div class="CardTime__left">
                    <p class="CardTime__left__open">عدد التذاكر : 5</p>
                </div>
            </a>
            <a href="#" class="UnChecked_Time">
                <div class="CardTime__right">
                    <label class="Card__container">
                        <input type="radio" name="time1" id="time2">
                        <span class="checkmark"></span>
                    </label>
                    <p>15:24 <i class="fas fa-clock"></i></p>
                </div>
                <div class="CardTime__left">
                    <p class="CardTime__left__close">بيعت لاكامل</p>
                </div>
            </a>
        
        </div>

        <div class="dateTicket__container__CardPlanTime direction-rtl">
            <div class="dateTicket__container__CardPlanTime__Plan">
                <h2>انواع التذاكر</h2>
                <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo">
                    <p class="sub__PlanTitle">الرويال الرويال</p>
                    <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo__PlanMoreInfo">
                        <p>SAR 1,100.00</p>
                        <div class="input__number">
                            <i class="fa fa-plus plus" aria-hidden="true"></i>
                            <input type="text" value="0">
                            <i class="fa fa-minus minus" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
                <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo">
                    <p class="sub__PlanTitle">الماسية الماسية الماسية</p>
                    <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo__PlanMoreInfo">
                        <p>SAR 1,100.00</p>
                        <div class="input__number">
                            <i class="fa fa-plus plus" aria-hidden="true"></i>
                            <input type="text" value="0" >
                            <i class="fa fa-minus minus" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
                <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo">
                    <p class="sub__PlanTitle">الماسية الماسية الماسية</p>
                    <div class="dateTicket__container__CardPlanTime__Plan__PlanInfo__PlanMoreInfo">
                        <p>SAR 1,100.00</p>                   
                        <div class="input__number">
                            <i class="fa fa-plus plus" aria-hidden="true"></i>
                            <input type="text"  value="0" >
                            <i class="fa fa-minus minus" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="dateTicket__container__CardPlanTime direction-rtl">
            <div class="dateTicket__container__CardPlanTime__Plan">
                <div class="dateTicket__container__CardPlanTime__Plan__linkAdd">
                    <a href="paymentPage.html">تأكيد العملية</a>
                </div>
            </div>
        </div>
      
        
    </div>


<!-- Footer -->
    <footer class="container__footer">
        <div class="footer">
            <div class="footer__left">
                <img src="dist/images/logo.png" alt="logo">
                <p>© 2021 All rights reserved. <a href="#">privacy policy</a></p>
            </div>
            <div class="footer__right">
                <a href="#"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                <a href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                <a href="#"><i class="fab fa-instagram" aria-hidden="true"></i></a>
            </div>
        </div>
    </footer>
  

<!-- script -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="dist/js/script.js"></script>
    <script>
       	$(document).ready(function() {
			$('.minus').click(function () {
				var $input = $(this).parent().find('input');
				var count = parseInt($input.val()) - 1;
				count = count < 0 ? 0 : count;
				$input.val(count);
				$input.change();
				return false;
			});
			$('.plus').click(function () {
				var $input = $(this).parent().find('input');
				$input.val(parseInt($input.val()) + 1);
				$input.change();
				return false;
			});
		});
    </script>

    <script>
        const date = new Date();

        const renderCalendar = () => {
        date.setDate(1);

        const monthDays = document.querySelector(".days");

        const lastDay = new Date(
            date.getFullYear(),
            date.getMonth() + 1,
            0
        ).getDate();

        const prevLastDay = new Date(
            date.getFullYear(),
            date.getMonth(),
            0
        ).getDate();

        const firstDayIndex = date.getDay();

        const lastDayIndex = new Date(
            date.getFullYear(),
            date.getMonth() + 1,
            0
        ).getDay();

        // const nextDays = 7 - lastDayIndex - 1;
        const nextDays = 7   ;

        const months = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
        ];

        document.querySelector(".date h1").innerHTML = months[date.getMonth()] + '-' + date.getFullYear();

        // document.querySelector(".date p").innerHTML = new Date().toDateString();

        let days = "";
       

        for (let x = firstDayIndex; x > 0; x--) {
            days += `<div onclick="selectDay(event)" class="prev-date" data-target="${prevLastDay - x + 1}/${date.getMonth()}/${date.getFullYear()}">${prevLastDay - x + 1}</div>`;
        }

        for (let i = 1; i <= lastDay; i++) {
            // console.log({date:new Date().getDate(), month:date.getMonth(),get:new Date().getMonth()});
            if (i === new Date().getDate() && date.getMonth() === new Date().getMonth()) {
                days += `<div onclick="selectDay(event)" data-target="${i}/${date.getMonth()+1}/${date.getFullYear()}">${i}</div>`;
            } else {
                days += `<div onclick="selectDay(event)" data-target="${i}/${date.getMonth()+1}/${date.getFullYear()}">${i}</div>`;
            }
        }

        for (let j = 1; j <= nextDays; j++) {
            days += `<div onclick="selectDay(event)"  class="next-date" data-target="${j}/${date.getMonth()+2}/${date.getFullYear()}" >${j}</div>`;
            monthDays.innerHTML = days;
        }
        };
        
     

        function selectDay(e) {
            // console.log(e.target);
            // console.log(e.target.textContent);
            document.querySelectorAll('.days div').forEach((n) => {
                n.classList.remove('today');
                getHasTicket();
            })
            let notHaveTicket = e.target.classList.contains('noTicket');
            let HaveTicket = e.target.classList.contains('hasTicket');

            if((!notHaveTicket && HaveTicket) || (notHaveTicket && HaveTicket)){
                // if click in day in calender , you have input hidden 
                e.target.classList.add('today');
                e.target.classList.remove('hasTicket');
                e.target.style.color="white";

                document.getElementById('input_number_day').value = e.target.textContent; // input hidden
            }
       
        }

        

        function getHasTicket(){
            // array of day  have  ticket tack From data base
            //  in date start in 0  , then 
            // [0,1,2,3,4,5,6,7,8,9,10,11]
            // | | | | | | | | | | | | | 
            //[1,2,3,4,5,6,7,8,9,10,11,12]
            let ticket_date = [
            '30/6/2021',
            '3/7/2021',
            '4/7/2021',
            '6/7/2021',
            '7/7/2021',
            '10/7/2021',
            '31/9/2021',
            '31/8/2021',
            '1/8/2021', //  '1/8/2021',  الأول من  شهر 8
            ];
            document.querySelectorAll('.days div').forEach((n) => {
            let dateFormat = n.getAttribute('data-target'); // 30/6/2021
            // console.log(dateFormat)
            ticket_date.forEach((Format)=>{
                if(dateFormat == Format){
                    n.classList.add('hasTicket');
                   
                }else{
                    n.classList.add('noTicket');
                    
                }
            })
                
           return false;
        })
        }



        document.querySelector(".prev").addEventListener("click", () => {
        date.setMonth(date.getMonth() - 1);
        renderCalendar();
        getHasTicket();
        });

        document.querySelector(".next").addEventListener("click", () => {
        date.setMonth(date.getMonth() + 1);
        renderCalendar();
        getHasTicket();
        });


        date.setMonth(date.getMonth() + 1);
        renderCalendar();
        date.setMonth(date.getMonth() - 1);
        renderCalendar();
        getHasTicket();

        // getAllTicket();
        // function getAllTicket(){
        //     // array of day  not  have  ticket tack From data base
        //     let notHaveTicket_date = [
        //     '25/6/2021',
        //     '12/6/2021',
        //     '21/6/2021',
        //     '22/6/2021',
        //     '24/6/2021',
        //     '11/6/2021'
        //     ];
        //     document.querySelectorAll('.days div').forEach((n) => {
        //     let dateFormat = n.getAttribute('data-target'); // 30/6/2021
        //     // console.log(dateFormat)
        //     notHaveTicket_date.forEach((Format)=>{
        //         if(dateFormat == Format){
        //             n.classList.add('noTicket');
        //         }
        //     })
        //    return false;
        // })
        // }
    </script>
</body>
</html>